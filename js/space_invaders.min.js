var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.polyfill=function(a,e,d,f){if(e){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var l=a[f];l in d||(d[l]={});d=d[l]}a=a[a.length-1];f=d[a];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,d,f){$jscomp.initSymbolIterator();d=null!=d?d:function(a){return a};var e=[],h=a[Symbol.iterator];if("function"==typeof h)for(a=h.call(a);!(h=a.next()).done;)e.push(d.call(f,h.value));else for(var h=a.length,p=0;p<h;p++)e.push(d.call(f,a[p]));return e}},"es6-impl","es3");
(function(){function a(b){if(w&&!m){var c=g.offsetLeft-F.offsetLeft-1;"ArrowLeft"===b.key&&0<=c-25?(b.preventDefault(),g.style.marginLeft=c-25+"px"):"ArrowRight"===b.key&&c+25<=F.offsetWidth-100?(b.preventDefault(),g.style.marginLeft=c+25+"px"):" "===b.key&&x&&(b.preventDefault(),q++,x=!1,window.sleep(G).then(function(){x=!0}),e())}}function e(){var b=document.createElement("div");b.classList.add("laser");b.style.left=g.offsetLeft+45+"px";b.style.top=g.offsetTop-30+"px";g.appendChild(b);for(var c=
{i:0};28>c.i;c={i:c.i},c.i++)window.sleep(c.i*y).then(function(c){return function(){b.style.top=g.offsetTop-50-25*c.i+"px";n().forEach(function(c){z(c,b)&&d(c,b)})}}(c));window.sleep(28*y).then(function(){b.parentElement&&(t=0,b.remove())})}function d(b,c){c.remove();b.remove();u++;t++;k+=(Math.floor(t/10)+1)*Number(b.attributes.points.value);document.getElementById("winLoss").classList.add("pointsFlash");window.sleep(750).then(function(){return document.getElementById("winLoss").classList.remove("pointsFlash")});
document.getElementById("points").textContent=k;if(H=!0,0===t%10)I("Enemies Retreat!"),v("ver",-1),H=!1;u===J&&(K("You Win!"),window.setCookie("playerWinsSpace",A+1,10),document.getElementById("playerWins").textContent=A+1,document.getElementById("myCanvas").style.display="block")}function f(b){if(!m){var c=document.createElement("div");c.classList.add("enemyLaser");var a=n()[window.randomIntFromInterval(0,n().length-1)].attributes.currentCell.value;document.getElementById("cell-"+a).appendChild(c);
l(c,b)}}function l(b,c){z(g,b)?(g.remove(),b.remove(),E()):b.offsetTop>=g.offsetTop?(b.remove(),c&&!m&&window.sleep(window.randomIntFromInterval(350,550)).then(function(){f(c)})):window.sleep(200).then(function(){b.style.marginTop=Number(b.style.marginTop.substring(0,b.style.marginTop.length-2))+25+"px";l(b,c)})}function h(){w||(document.getElementById("start").classList.remove("startButtonFlash"),window.modal("Start!",1500),window.sleep(1500).then(function(){w=!0;L();f(!0)}))}function p(){n().some(function(b){return z(b,
g)||"30"===b.attributes.currentCell.value.split("-")[0]})&&E()}function E(){window.setCookie("playerLossesSpace",B+1,10);document.getElementById("playerLosses").textContent=B+1;k=0;window.setCookie("currentPointsSpace",0,10);document.getElementById("points").textContent=0;M=!0;K("You Lose!")}function K(b){m=!0;window.modal(b,2E3);Array.from(document.getElementsByClassName("laser")).forEach(function(b){return b.remove()});Array.from(document.getElementsByClassName("enemyLaser")).forEach(function(b){return b.remove()});
0<q&&(document.getElementById("statsContainer").style.display="flex",document.getElementById("accuracy").textContent=Math.floor(u/q*100)+"%");window.setCookie("currentPointsSpace",k,10);k>N&&!M&&(window.setCookie("highScoreSpace",k,10),document.getElementById("highScore").textContent=k);document.getElementById("reload").textContent="Play Again"}function I(b){var c=document.getElementById("upgradeText");c.textContent=b;c.classList.add("flash");window.sleep(4950).then(function(){c.classList.remove("flash");
c.textContent=""})}function L(){m||(O("0")&&!r?(v("ver",1),r=!0,C++,D=1):O("46")&&!r?(v("ver",1),r=!0,C++,D=-1):(v("hor",D),r=!1),15===window.randomIntFromInterval(1,15)&&f(!1),0===q%10&&.65<u/q&&!P&&(I("Laser Upgraded!"),G=500,y=150,P=!0),p(),m||window.sleep(375-16*C).then(function(){return L()}))}function v(b,c){n().forEach(function(a){var d=Number(a.attributes.currentCell.value.split("-")[0]),e=Number(a.attributes.currentCell.value.split("-")[1]);a=a.parentElement.removeChild(a);d="hor"===b?d+
"-"+(e+c):d+c+"-"+e;a.attributes.currentCell.value=d;document.getElementById("cell-"+d).appendChild(a)})}var x=!0,H=!1,w=!1,m=!1,J=0,u=0,q=0,C=1,D=1,r=!1,y=175,G=550,P=!1,t=0,k=Number(window.getCookie("currentPointsSpace")),M=!1,N=Number(window.getCookie("highScoreSpace")),A=Number(window.getCookie("playerWinsSpace")),B=Number(window.getCookie("playerLossesSpace")),Q=["images/enemy-4.png","images/enemy-2.png","images/enemy-3.png","images/enemy-1.png"],g=document.getElementById("ship"),F=document.getElementById("gameBoard"),
n=function(){return Array.from(document.getElementsByClassName("enemyShip"))},z=function(b,a){return!(a.offsetLeft>b.offsetWidth+b.offsetLeft||b.offsetLeft>a.offsetWidth+a.offsetLeft||a.offsetTop>b.offsetHeight+b.offsetTop||b.offsetTop>a.offsetHeight+a.offsetTop)},O=function(b){return n().some(function(a){return a.attributes.currentCell.value.split("-")[1]===b})};(function(){for(var b=0;32>b;b++){var c=document.createElement("div");document.getElementById("enemies").appendChild(c);c.classList.add("ship-row");
c.id="row-"+b;for(var d=0;50>d;d++){var e=document.createElement("div");c.appendChild(e);e.classList.add("ship-cell");e.id="cell-"+b+"-"+d}}for(b=1;5>b;b++)for(c=Q[b-1],d=1;8>d;d++){var e=document.createElement("div"),f=document.createElement("img");f.src=c;f.classList.add("enemyShipImg");e.appendChild(f);e.classList.add("enemyShip");document.getElementById("cell-"+3*b+"-"+6*d).appendChild(e);e.setAttribute("currentCell",3*b+"-"+6*d);e.setAttribute("points",-10*b+60);J++}document.addEventListener("keydown",
a);document.getElementById("start").addEventListener("click",h);document.getElementById("playerWins").textContent=A;document.getElementById("playerLosses").textContent=B;document.getElementById("highScore").textContent=N;document.getElementById("points").textContent=k;window.onkeydown=function(a){return!(" "===a.key&&a.target==document.body)}})()})();
