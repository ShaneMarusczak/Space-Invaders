var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[f]=d.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var f=0;return $jscomp.iteratorPrototype(function(){return f<c.length?{done:!1,value:c[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.polyfill=function(c,f,d,g){if(f){d=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var m=c[g];m in d||(d[m]={});d=d[m]}c=c[c.length-1];g=d[c];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,d,g){$jscomp.initSymbolIterator();d=null!=d?d:function(c){return c};var f=[],k=c[Symbol.iterator];if("function"==typeof k)for(c=k.call(c);!(k=c.next()).done;)f.push(d.call(g,k.value));else for(var k=c.length,q=0;q<k;q++)f.push(d.call(g,c[q]));return f}},"es6-impl","es3");
(function(){function c(a){if(w&&!n){var e=h.offsetLeft-G.offsetLeft-1;"ArrowLeft"===a.key&&0<=e-25?(a.preventDefault(),h.style.marginLeft=e-25+"px"):"ArrowRight"===a.key&&e+25<=G.offsetWidth-100?(a.preventDefault(),h.style.marginLeft=e+25+"px"):" "===a.key&&x&&(a.preventDefault(),y++,x=!1,window.sleep(H).then(function(){x=!0}),f())}}function f(){var a=document.createElement("div");a.classList.add("laser");a.style.left=h.offsetLeft+45+"px";a.style.top=h.offsetTop-30+"px";h.appendChild(a);for(var e=
{i:0};28>e.i;e={i:e.i},e.i++)window.sleep(e.i*z).then(function(b){return function(){a.style.top=h.offsetTop-50-25*b.i+"px";document.querySelectorAll(".blocker").forEach(function(b){p(b,a)&&(a.remove(),b.classList.remove("blocker"))});r().forEach(function(b){p(b,a)&&d(b,a)})}}(e));window.sleep(28*z).then(function(){a.parentElement&&(u=0,a.remove())})}function d(a,e){e.remove();a.remove();A++;u++;l+=(Math.floor(u/10)+1)*Number(a.attributes.points.value);document.getElementById("winLoss").classList.add("pointsFlash");
window.sleep(750).then(function(){return document.getElementById("winLoss").classList.remove("pointsFlash")});document.getElementById("points").textContent=l;if(I=!0,0===u%10)J("Enemies Retreat"),v("ver",-1),I=!1;A===K&&(L("You Win!"),window.setCookie("playerWinsSpace",B+1,10),document.getElementById("playerWins").textContent=B+1,document.getElementById("myCanvas").style.display="block")}function g(a){if(!n){var e=document.createElement("div"),b=r();e.classList.add("enemyLaser");b=b[window.randomIntFromInterval(0,
b.length-1)].attributes.currentCell.value;document.getElementById("cell-"+b).appendChild(e);m(e,a)}}function m(a,e){var b=!1;document.querySelectorAll(".blocker").forEach(function(c){p(c,a)&&(a.remove(),c.classList.remove("blocker"),e&&g(!0),b=!0)});b||(p(h,a)?(h.remove(),a.remove(),F()):a.offsetTop>=h.offsetTop?(a.remove(),e&&!n&&window.sleep(window.randomIntFromInterval(350,550)).then(function(){g(e)})):window.sleep(200).then(function(){a.style.marginTop=Number(a.style.marginTop.substring(0,a.style.marginTop.length-
2))+25+"px";m(a,e)}))}function k(){w||(document.getElementById("start").classList.remove("startButtonFlash"),window.modal("Start!",1500),window.sleep(1500).then(function(){w=!0;M();g(!0)}))}function q(){r().some(function(a){return p(a,h)||"30"===a.attributes.currentCell.value.split("-")[0]})&&F()}function F(){window.setCookie("playerLossesSpace",C+1,10);document.getElementById("playerLosses").textContent=C+1;l=0;window.setCookie("currentPointsSpace",0,10);document.getElementById("points").textContent=
0;N=!0;L("You Lose!")}function L(a){n=!0;window.modal(a,2E3);Array.from(document.getElementsByClassName("laser")).forEach(function(a){return a.remove()});Array.from(document.getElementsByClassName("enemyLaser")).forEach(function(a){return a.remove()});window.setCookie("currentPointsSpace",l,10);l>O&&!N&&(window.setCookie("highScoreSpace",l,10),document.getElementById("highScore").textContent=l);document.getElementById("reload").textContent="Play Again"}function J(a){var c=document.getElementById("upgradeText");
c.textContent=a;c.classList.add("flash");window.sleep(4950).then(function(){c.classList.remove("flash");c.textContent=""})}function M(){n||(P("0")&&!t?(v("ver",1),t=!0,D++,E=1):P("46")&&!t?(v("ver",1),t=!0,D++,E=-1):(v("hor",E),t=!1),5===window.randomIntFromInterval(1,8)&&g(5===window.randomIntFromInterval(1,15)),0===y%10&&.65<A/y&&!Q&&(J("Laser Upgrade"),H=500,z=150,Q=!0),q(),n||window.sleep(375-16*D).then(function(){return M()}))}function v(a,c){var b=document.querySelectorAll(".blocker");r().forEach(function(e){var d=
Number(e.attributes.currentCell.value.split("-")[0]),f=Number(e.attributes.currentCell.value.split("-")[1]),g=e.parentElement.removeChild(e),d="hor"===a?d+"-"+(f+c):d+c+"-"+f;g.attributes.currentCell.value=d;document.getElementById("cell-"+d).appendChild(g);b.forEach(function(a){p(a,e)&&a.classList.remove("blocker")})})}var x=!0,I=!1,w=!1,n=!1,K=0,A=0,y=0,D=1,E=1,t=!1,z=175,H=550,Q=!1,u=0,l=Number(window.getCookie("currentPointsSpace")),N=!1,O=Number(window.getCookie("highScoreSpace")),B=Number(window.getCookie("playerWinsSpace")),
C=Number(window.getCookie("playerLossesSpace")),R=["images/enemy-4.png","images/enemy-2.png","images/enemy-3.png","images/enemy-1.png"],h=document.getElementById("ship"),G=document.getElementById("gameBoard"),r=function(){return Array.from(document.getElementsByClassName("enemyShip"))},p=function(a,c){return!(c.offsetLeft>a.offsetWidth+a.offsetLeft||a.offsetLeft>c.offsetWidth+c.offsetLeft||c.offsetTop>a.offsetHeight+a.offsetTop||a.offsetTop>c.offsetHeight+c.offsetTop)},P=function(a){return r().some(function(c){return c.attributes.currentCell.value.split("-")[1]===
a})};(function(){for(var a=0;32>a;a++){var e=document.createElement("div");document.getElementById("enemies").appendChild(e);e.classList.add("ship-row");e.id="row-"+a;for(var b=0;50>b;b++){var d=document.createElement("div");e.appendChild(d);d.classList.add("ship-cell");d.id="cell-"+a+"-"+b;if(!(25!==a&&26!==a||2!==b&&3!==b&&4!==b&&5!==b&&6!==b&&12!==b&&13!==b&&14!==b&&15!==b&&16!==b&&22!==b&&23!==b&&24!==b&&25!==b&&26!==b&&32!==b&&33!==b&&34!==b&&35!==b&&36!==b&&42!==b&&43!==b&&44!==b&&45!==b&&46!==
b)){if(25==a&&(2===b||6===b||12===b||16===b||22===b||26===b||32===b||36===b||42===b||46===b))continue;d.classList.add("blocker")}27!==a||2!==b&&6!==b&&12!==b&&16!==b&&22!==b&&26!==b&&32!==b&&36!==b&&42!==b&&46!==b||d.classList.add("blocker")}}for(a=1;5>a;a++)for(e=R[a-1],b=1;8>b;b++){var d=document.createElement("div"),f=document.createElement("img");f.src=e;f.classList.add("enemyShipImg");d.appendChild(f);d.classList.add("enemyShip");document.getElementById("cell-"+3*a+"-"+6*b).appendChild(d);d.setAttribute("currentCell",
3*a+"-"+6*b);d.setAttribute("points",-10*a+60);K++}document.addEventListener("keydown",c);document.getElementById("start").addEventListener("click",k);document.getElementById("playerWins").textContent=B;document.getElementById("playerLosses").textContent=C;document.getElementById("highScore").textContent=O;document.getElementById("points").textContent=l;window.onkeydown=function(a){return!(" "===a.key&&a.target==document.body)}})()})();
